import"../chunks/CWj6FrbW.js";import{o as ta,s}from"../chunks/BpDpeONt.js";import{i as aa,s as ra,j as ea,t as l,f as c,g as o,k as sa,$ as oa,l as e,m as i,o as va,n as t,r,u as p,v as m,q as la}from"../chunks/BxrbYPPH.js";import{i as _}from"../chunks/C_-0o-f2.js";import{e as Ft,i as Gt}from"../chunks/n-s4RcA1.js";import{d as pa,h as ia}from"../chunks/DKpueC4a.js";import{b as Kt}from"../chunks/BGk8CD_Q.js";import{g as _a}from"../chunks/DOeRUQ82.js";import{s as ca}from"../chunks/BqNaFByK.js";import"../chunks/69_IOA4Y.js";import{R as ma}from"../chunks/DgJjuvVc.js";import"../chunks/ixumTwwY.js";import{H as fa}from"../chunks/BezDMT-k.js";import{c as da}from"../chunks/Dcrl4MPd.js";import{g as xa,a as ga}from"../chunks/C6eE29Wt.js";var na=l('<button slot="left"><!></button>'),ya=l('<h1 slot="center" class="font-semibold">알림</h1>'),ua=l('<div class="py-24 text-center text-gray-500">새 알림이 없어요.</div>'),ha=(zt,at,Y)=>at(t(Y)),wa=l('<p class="text-sm"><strong> </strong>님이 게시글을 좋아했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),ka=l('<p class="text-sm"><strong> </strong>님이 서비스를 좋아했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),ba=l('<p class="text-sm"><strong> </strong>님이 댓글을 남겼습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),ja=l('<p class="text-sm"><strong> </strong>님이 답글을 남겼습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Sa=l('<p class="text-sm"><strong> </strong>님이 회원님을 팔로우했습니다.</p>'),qa=l('<p class="text-sm">새 주문이 접수되었습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),La=l('<p class="text-sm">주문이 결제 승인되었습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Da=l('<p class="text-sm">서비스가 완료되었습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Ra=l('<p class="text-sm">주문이 취소되었습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),za=l('<p class="text-sm"><strong> </strong>님이 리뷰를 작성했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Aa=la('<svg fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>'),Ba=l('<p class="text-sm"><strong> </strong>님이 전문가 요청 리뷰를 작성했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p> <div class="mt-1 flex items-center gap-1"></div>',1),Ha=l('<p class="text-sm"><strong> </strong>님이 회원님의 제안을 수락했습니다!</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Ia=l('<p class="text-sm"> </p>'),Ma=l('<p class="text-sm"><strong> </strong>님이 커피챗을 요청했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Oa=l('<p class="text-sm"><strong> </strong>님이 커피챗 요청을 수락했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Pa=l('<p class="text-sm"><strong> </strong>님이 커피챗 요청을 거절했습니다.</p> <p class="mt-1 text-sm text-gray-600 break-words"> </p>',1),Ca=l('<p class="text-sm font-medium"> </p>'),Fa=l('<li><button type="button" class="w-full text-left"><div class="flex items-start justify-between gap-2"><div class="flex flex-1 flex-col gap-1 min-w-0"><!></div> <div class="shrink-0 text-xs text-gray-500 whitespace-nowrap self-start"> </div></div></button></li>'),Ga=l('<ul class="divide-y divide-gray-100"></ul>'),Ka=l('<!> <main class="px-4"><!></main>',1);function er(zt,at){aa(at,!0);const Y=xa(),At=ga();let{notifications:Et}=at.data,rt=ra(ea(Et));const Jt=v=>new Date(v).toLocaleString("ko-KR",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),Nt=async v=>{v.read_at||(await At.notifications.mark_as_read(v.id,Y.id),v.read_at=new Date().toISOString()),v.link_url&&_a(v.link_url)};ta(async()=>{try{if(Y?.id){await At.notifications.mark_all_as_read(Y.id);const v=new Date().toISOString();va(rt,t(rt).map(f=>({...f,read_at:f.read_at??v})),!0)}}catch(v){console.error("Failed to mark all notifications as read:",v)}});var Bt=Ka();ia(v=>{oa.title="알림 | 문"});var Ht=c(Bt);fa(Ht,{$$slots:{left:(v,f)=>{var n=na();n.__click=function(...J){ca?.apply(this,J)};var a=e(n);ma(a,{size:24,get color(){return da.gray[600]}}),r(n),o(v,n)},center:(v,f)=>{var n=ya();o(v,n)}}});var It=i(Ht,2),Qt=e(It);{var Tt=v=>{var f=ua();o(v,f)},Ut=v=>{var f=Ga();Ft(f,21,()=>t(rt),Gt,(n,a)=>{var J=Fa();Kt(J,1,"py-3");var bt=e(J);bt.__click=[ha,Nt,a];var Mt=e(bt),jt=e(Mt),Vt=e(jt);{var Wt=y=>{var et=wa(),Z=c(et),st=e(Z),u=e(st,!0);r(st),m(),r(Z);var R=i(Z,2),z=e(R,!0);r(R),p(()=>{s(u,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(z,t(a).payload?.post_title)}),o(y,et)},Xt=(y,et)=>{{var Z=u=>{var R=ka(),z=c(R),ot=e(z),h=e(ot,!0);r(ot),m(),r(z);var A=i(z,2),B=e(A,!0);r(A),p(()=>{s(h,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(B,t(a).payload?.service_title)}),o(u,R)},st=(u,R)=>{{var z=h=>{var A=ba(),B=c(A),vt=e(B),w=e(vt,!0);r(vt),m(),r(B);var H=i(B,2),I=e(H,!0);r(H),p(()=>{s(w,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(I,t(a).payload?.preview)}),o(h,A)},ot=(h,A)=>{{var B=w=>{var H=ja(),I=c(H),lt=e(I),k=e(lt,!0);r(lt),m(),r(I);var b=i(I,2),N=e(b,!0);r(b),p(()=>{s(k,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(N,t(a).payload?.preview)}),o(w,H)},vt=(w,H)=>{{var I=k=>{var b=Sa(),N=e(b),St=e(N,!0);r(N),m(),r(b),p(()=>s(St,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명"))),o(k,b)},lt=(k,b)=>{{var N=Q=>{var pt=qa(),it=i(c(pt),2),qt=e(it,!0);r(it),p(()=>s(qt,t(a).payload?.service_title)),o(Q,pt)},St=(Q,pt)=>{{var it=T=>{var _t=La(),ct=i(c(_t),2),Lt=e(ct,!0);r(ct),p(()=>s(Lt,t(a).payload?.service_title)),o(T,_t)},qt=(T,_t)=>{{var ct=U=>{var mt=Da(),ft=i(c(mt),2),Dt=e(ft,!0);r(ft),p(()=>s(Dt,t(a).payload?.service_title)),o(U,mt)},Lt=(U,mt)=>{{var ft=V=>{var dt=Ra(),xt=i(c(dt),2),Rt=e(xt,!0);r(xt),p(()=>s(Rt,t(a).payload?.service_title)),o(V,dt)},Dt=(V,dt)=>{{var xt=W=>{var gt=za(),$=c(gt),nt=e($),j=e(nt,!0);r(nt),m(),r($);var M=i($,2),O=e(M,!0);r(M),p(()=>{s(j,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(O,t(a).payload?.title)}),o(W,gt)},Rt=(W,gt)=>{{var $=j=>{var M=Ba(),O=c(M),yt=e(O),S=e(yt,!0);r(yt),m(),r(O);var q=i(O,2),P=e(q,!0);r(q);var C=i(q,2);Ft(C,20,()=>Array(5),Gt,(d,x,F)=>{var ut=Aa();p(()=>Kt(ut,0,`h-3 w-3 ${F<(t(a).payload?.rating||0)?"text-yellow-400":"text-gray-300"}`)),o(d,ut)}),r(C),p(()=>{s(S,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(P,t(a).payload?.request_title)}),o(j,M)},nt=(j,M)=>{{var O=S=>{var q=Ha(),P=c(q),C=e(P),d=e(C,!0);r(C),m(),r(P);var x=i(P,2),F=e(x,!0);r(x),p(()=>{s(d,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(F,t(a).payload?.request_title)}),o(S,q)},yt=(S,q)=>{{var P=d=>{var x=Ia(),F=e(x);r(x),p(()=>s(F,`선물을 받았습니다. (+${t(a).payload?.amount??""} 문)`)),o(d,x)},C=(d,x)=>{{var F=X=>{var ht=Ma(),tt=c(ht),wt=e(tt),L=e(wt,!0);r(wt),m(),r(tt);var G=i(tt,2),K=e(G,!0);r(G),p(()=>{s(L,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(K,t(a).payload?.subject)}),o(X,ht)},ut=(X,ht)=>{{var tt=L=>{var G=Oa(),K=c(G),kt=e(K),D=e(kt,!0);r(kt),m(),r(K);var g=i(K,2),E=e(g,!0);r(g),p(()=>{s(D,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s(E,t(a).payload?.subject)}),o(L,G)},wt=(L,G)=>{{var K=D=>{var g=Pa(),E=c(g),Pt=e(E),Zt=e(Pt,!0);r(Pt),m(),r(E);var Ct=i(E,2),$t=e(Ct,!0);r(Ct),p(()=>{s(Zt,t(a).actor?.name||"@"+(t(a).actor?.handle||"익명")),s($t,t(a).payload?.subject)}),o(D,g)},kt=D=>{var g=Ca(),E=e(g,!0);r(g),p(()=>s(E,t(a).type)),o(D,g)};_(L,D=>{t(a).type==="coffee_chat.rejected"?D(K):D(kt,!1)},G)}};_(X,L=>{t(a).type==="coffee_chat.accepted"?L(tt):L(wt,!1)},ht)}};_(d,X=>{t(a).type==="coffee_chat.requested"?X(F):X(ut,!1)},x)}};_(S,d=>{t(a).type==="gift.received"?d(P):d(C,!1)},q)}};_(j,S=>{t(a).type==="proposal.accepted"?S(O):S(yt,!1)},M)}};_(W,j=>{t(a).type==="expert_review.created"?j($):j(nt,!1)},gt)}};_(V,W=>{t(a).type==="review.created"?W(xt):W(Rt,!1)},dt)}};_(U,V=>{t(a).type==="order.cancelled"?V(ft):V(Dt,!1)},mt)}};_(T,U=>{t(a).type==="order.completed"?U(ct):U(Lt,!1)},_t)}};_(Q,T=>{t(a).type==="order.approved"?T(it):T(qt,!1)},pt)}};_(k,Q=>{t(a).type==="order.created"?Q(N):Q(St,!1)},b)}};_(w,k=>{t(a).type==="follow.created"?k(I):k(lt,!1)},H)}};_(h,w=>{t(a).type==="comment.reply"?w(B):w(vt,!1)},A)}};_(u,h=>{t(a).type==="comment.created"?h(z):h(ot,!1)},R)}};_(y,u=>{t(a).type==="service.liked"?u(Z):u(st,!1)},et)}};_(Vt,y=>{t(a).type==="post.liked"?y(Wt):y(Xt,!1)})}r(jt);var Ot=i(jt,2),Yt=e(Ot,!0);r(Ot),r(Mt),r(bt),r(J),p(y=>s(Yt,y),[()=>Jt(t(a).created_at)]),o(n,J)}),r(f),o(v,f)};_(Qt,v=>{t(rt).length===0?v(Tt):v(Ut,!1)})}r(It),o(zt,Bt),sa()}pa(["click"]);export{er as component};
