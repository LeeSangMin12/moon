import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{o as Xn,b as qn}from"./BpDpeONt.js";import{i as Qn,am as Ye,an as Yn,t as Jn,z as Je,l as Ze,m as $,u as Zn,g as ts,k as es,n as b,y as ns,o as be,af as ss,r as tn}from"./BxrbYPPH.js";import{d as rs}from"./DKpueC4a.js";import{b as V}from"./BGk8CD_Q.js";import{b as is}from"./DUXZVHcJ.js";import{i as os}from"./Bb3yvuEN.js";import{p as en}from"./Cqu1rs7T.js";import{M as ct,m as et,a as lt,b as L,E as N,N as R,w as ht,P as _,c as z,T as it,t as we,S as Ct,n as vn,d as as,i as kn,e as ze,f as ls,g as cs,h as us,j as ds,k as hs,l as Me,o as ps,p as fs,q as An,r as ms,s as gs,u as ys,F as nn,v as En,D as wt,x as fe,y as bs,z as vs,A as ks,B as As,C as Es,G as Ts}from"./B9AC9LgO.js";var xs=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Ls=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Cs=ct.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[lt({find:xs,type:this.type})]},addPasteRules(){return[et({find:Ls,type:this.type})]}}),ws=N.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),zt=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...s}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,s,n]},Ms=/^\s*>\s$/,Ss=R.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return zt("blockquote",{...L(this.options.HTMLAttributes,t),children:zt("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ht({find:Ms,type:this.type})]}}),Is=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Os=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Rs=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Hs=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Ps=ct.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return zt("strong",{...L(this.options.HTMLAttributes,t),children:zt("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[lt({find:Is,type:this.type}),lt({find:Rs,type:this.type})]},addPasteRules(){return[et({find:Os,type:this.type}),et({find:Hs,type:this.type})]}}),Ns=/(^|[^`])`([^`]+)`(?!`)$/,_s=/(^|[^`])`([^`]+)`(?!`)/g,Ds=ct.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[lt({find:Ns,type:this.type})]},addPasteRules(){return[et({find:_s,type:this.type})]}}),Bs=/^```([a-z]+)?[\s\n]$/,zs=/^~~~([a-z]+)?[\s\n]$/,js=R.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",L(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:s,empty:r}=n;if(s.parent.type!==this.type)return!1;const i=" ".repeat(this.options.tabSize);return r?t.commands.insertContent(i):t.commands.command(({tr:o})=>{const{from:a,to:l}=n,c=e.doc.textBetween(a,l,`
`,`
`).split(`
`).map(p=>i+p).join(`
`);return o.replaceWith(a,l,e.schema.text(c)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:s,empty:r}=n;return s.parent.type!==this.type?!1:r?t.commands.command(({tr:i})=>{var o;const{pos:a}=s,l=s.start(),u=s.end(),c=e.doc.textBetween(l,u,`
`,`
`).split(`
`);let p=0,f=0;const g=a-l;for(let S=0;S<c.length;S+=1){if(f+c[S].length>=g){p=S;break}f+=c[S].length+1}const k=((o=c[p].match(/^ */))==null?void 0:o[0])||"",y=Math.min(k.length,this.options.tabSize);if(y===0)return!0;let A=l;for(let S=0;S<p;S+=1)A+=c[S].length+1;return i.delete(A,A+y),a-A<=y&&i.setSelection(it.create(i.doc,A)),!0}):t.commands.command(({tr:i})=>{const{from:o,to:a}=n,d=e.doc.textBetween(o,a,`
`,`
`).split(`
`).map(c=>{var p;const f=((p=c.match(/^ */))==null?void 0:p[0])||"",g=Math.min(f.length,this.options.tabSize);return c.slice(g)}).join(`
`);return i.replaceWith(o,a,e.schema.text(d)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:s,empty:r}=n;if(!r||s.parent.type!==this.type)return!1;const i=s.parentOffset===s.parent.nodeSize-2,o=s.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:s}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0?!1:s.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Ct.near(s.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[we({find:Bs,type:this.type,getAttributes:t=>({language:t[1]})}),we({find:zs,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new _({key:new z("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),r=s?JSON.parse(s):void 0,i=r?.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(it.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),$s=R.create({name:"doc",topNode:!0,content:"block+"}),Us=R.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",L(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:s})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:r,storedMarks:i}=n;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=s.extensionManager,l=i||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&o){const c=l.filter(p=>a.includes(p.type.name));u.ensureMarks(c)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ks=R.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,L(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>we({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Ws=R.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",L(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!as(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:s}=n,r=t();return kn(n)?r.insertContentAt(s.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:o})=>{var a;if(o){const{$to:l}=i.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(it.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(ze.create(i.doc,l.pos)):i.setSelection(it.create(i.doc,l.pos));else{const d=(a=l.parent.type.contentMatch.defaultType)==null?void 0:a.create();d&&(i.insert(u,d),i.setSelection(it.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vn({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Fs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Vs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Gs=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Xs=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,qs=ct.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[lt({find:Fs,type:this.type}),lt({find:Gs,type:this.type})]},addPasteRules(){return[et({find:Vs,type:this.type}),et({find:Xs,type:this.type})]}});const Qs="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Ys="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Se="numeric",Ie="ascii",Oe="alpha",vt="asciinumeric",bt="alphanumeric",Re="domain",Tn="emoji",Js="scheme",Zs="slashscheme",ve="whitespace";function tr(t,e){return t in e||(e[t]=[]),e[t]}function rt(t,e,n){e[Se]&&(e[vt]=!0,e[bt]=!0),e[Ie]&&(e[vt]=!0,e[Oe]=!0),e[vt]&&(e[bt]=!0),e[Oe]&&(e[bt]=!0),e[bt]&&(e[Re]=!0),e[Tn]&&(e[Re]=!0);for(const s in e){const r=tr(s,n);r.indexOf(t)<0&&r.push(t)}}function er(t,e){const n={};for(const s in e)e[s].indexOf(t)>=0&&(n[s]=!0);return n}function O(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}O.groups={};O.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let s=0;s<e.jr.length;s++){const r=e.jr[s][0],i=e.jr[s][1];if(i&&r.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,s){for(let r=0;r<t.length;r++)this.tt(t[r],e,n,s)},tr(t,e,n,s){s=s||O.groups;let r;return e&&e.j?r=e:(r=new O(e),n&&s&&rt(e,n,s)),this.jr.push([t,r]),r},ts(t,e,n,s){let r=this;const i=t.length;if(!i)return r;for(let o=0;o<i-1;o++)r=r.tt(t[o]);return r.tt(t[i-1],e,n,s)},tt(t,e,n,s){s=s||O.groups;const r=this;if(e&&e.j)return r.j[t]=e,e;const i=e;let o,a=r.go(t);if(a?(o=new O,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new O,i){if(s)if(o.t&&typeof o.t=="string"){const l=Object.assign(er(o.t,s),n);rt(i,l,s)}else n&&rt(i,n,s);o.t=i}return r.j[t]=o,o}};const m=(t,e,n,s,r)=>t.ta(e,n,s,r),T=(t,e,n,s,r)=>t.tr(e,n,s,r),sn=(t,e,n,s,r)=>t.ts(e,n,s,r),h=(t,e,n,s,r)=>t.tt(e,n,s,r),q="WORD",He="UWORD",xn="ASCIINUMERICAL",Ln="ALPHANUMERICAL",Mt="LOCALHOST",Pe="TLD",Ne="UTLD",Dt="SCHEME",dt="SLASH_SCHEME",je="NUM",_e="WS",$e="NL",kt="OPENBRACE",At="CLOSEBRACE",jt="OPENBRACKET",$t="CLOSEBRACKET",Ut="OPENPAREN",Kt="CLOSEPAREN",Wt="OPENANGLEBRACKET",Ft="CLOSEANGLEBRACKET",Vt="FULLWIDTHLEFTPAREN",Gt="FULLWIDTHRIGHTPAREN",Xt="LEFTCORNERBRACKET",qt="RIGHTCORNERBRACKET",Qt="LEFTWHITECORNERBRACKET",Yt="RIGHTWHITECORNERBRACKET",Jt="FULLWIDTHLESSTHAN",Zt="FULLWIDTHGREATERTHAN",te="AMPERSAND",ee="APOSTROPHE",ne="ASTERISK",J="AT",se="BACKSLASH",re="BACKTICK",ie="CARET",tt="COLON",Ue="COMMA",oe="DOLLAR",U="DOT",ae="EQUALS",Ke="EXCLAMATION",P="HYPHEN",Et="PERCENT",le="PIPE",ce="PLUS",ue="POUND",Tt="QUERY",We="QUOTE",Cn="FULLWIDTHMIDDLEDOT",Fe="SEMI",K="SLASH",xt="TILDE",de="UNDERSCORE",wn="EMOJI",he="SYM";var Mn=Object.freeze({__proto__:null,ALPHANUMERICAL:Ln,AMPERSAND:te,APOSTROPHE:ee,ASCIINUMERICAL:xn,ASTERISK:ne,AT:J,BACKSLASH:se,BACKTICK:re,CARET:ie,CLOSEANGLEBRACKET:Ft,CLOSEBRACE:At,CLOSEBRACKET:$t,CLOSEPAREN:Kt,COLON:tt,COMMA:Ue,DOLLAR:oe,DOT:U,EMOJI:wn,EQUALS:ae,EXCLAMATION:Ke,FULLWIDTHGREATERTHAN:Zt,FULLWIDTHLEFTPAREN:Vt,FULLWIDTHLESSTHAN:Jt,FULLWIDTHMIDDLEDOT:Cn,FULLWIDTHRIGHTPAREN:Gt,HYPHEN:P,LEFTCORNERBRACKET:Xt,LEFTWHITECORNERBRACKET:Qt,LOCALHOST:Mt,NL:$e,NUM:je,OPENANGLEBRACKET:Wt,OPENBRACE:kt,OPENBRACKET:jt,OPENPAREN:Ut,PERCENT:Et,PIPE:le,PLUS:ce,POUND:ue,QUERY:Tt,QUOTE:We,RIGHTCORNERBRACKET:qt,RIGHTWHITECORNERBRACKET:Yt,SCHEME:Dt,SEMI:Fe,SLASH:K,SLASH_SCHEME:dt,SYM:he,TILDE:xt,TLD:Pe,UNDERSCORE:de,UTLD:Ne,UWORD:He,WORD:q,WS:_e});const G=/[a-z]/,yt=/\p{L}/u,ke=/\p{Emoji}/u,X=/\d/,Ae=/\s/,rn="\r",Ee=`
`,nr="️",sr="‍",Te="￼";let Ht=null,Pt=null;function rr(t=[]){const e={};O.groups=e;const n=new O;Ht==null&&(Ht=on(Qs)),Pt==null&&(Pt=on(Ys)),h(n,"'",ee),h(n,"{",kt),h(n,"}",At),h(n,"[",jt),h(n,"]",$t),h(n,"(",Ut),h(n,")",Kt),h(n,"<",Wt),h(n,">",Ft),h(n,"（",Vt),h(n,"）",Gt),h(n,"「",Xt),h(n,"」",qt),h(n,"『",Qt),h(n,"』",Yt),h(n,"＜",Jt),h(n,"＞",Zt),h(n,"&",te),h(n,"*",ne),h(n,"@",J),h(n,"`",re),h(n,"^",ie),h(n,":",tt),h(n,",",Ue),h(n,"$",oe),h(n,".",U),h(n,"=",ae),h(n,"!",Ke),h(n,"-",P),h(n,"%",Et),h(n,"|",le),h(n,"+",ce),h(n,"#",ue),h(n,"?",Tt),h(n,'"',We),h(n,"/",K),h(n,";",Fe),h(n,"~",xt),h(n,"_",de),h(n,"\\",se),h(n,"・",Cn);const s=T(n,X,je,{[Se]:!0});T(s,X,s);const r=T(s,G,xn,{[vt]:!0}),i=T(s,yt,Ln,{[bt]:!0}),o=T(n,G,q,{[Ie]:!0});T(o,X,r),T(o,G,o),T(r,X,r),T(r,G,r);const a=T(n,yt,He,{[Oe]:!0});T(a,G),T(a,X,i),T(a,yt,a),T(i,X,i),T(i,G),T(i,yt,i);const l=h(n,Ee,$e,{[ve]:!0}),u=h(n,rn,_e,{[ve]:!0}),d=T(n,Ae,_e,{[ve]:!0});h(n,Te,d),h(u,Ee,l),h(u,Te,d),T(u,Ae,d),h(d,rn),h(d,Ee),T(d,Ae,d),h(d,Te,d);const c=T(n,ke,wn,{[Tn]:!0});h(c,"#"),T(c,ke,c),h(c,nr,c);const p=h(c,sr);h(p,"#"),T(p,ke,c);const f=[[G,o],[X,r]],g=[[G,null],[yt,a],[X,i]];for(let v=0;v<Ht.length;v++)Y(n,Ht[v],Pe,q,f);for(let v=0;v<Pt.length;v++)Y(n,Pt[v],Ne,He,g);rt(Pe,{tld:!0,ascii:!0},e),rt(Ne,{utld:!0,alpha:!0},e),Y(n,"file",Dt,q,f),Y(n,"mailto",Dt,q,f),Y(n,"http",dt,q,f),Y(n,"https",dt,q,f),Y(n,"ftp",dt,q,f),Y(n,"ftps",dt,q,f),rt(Dt,{scheme:!0,ascii:!0},e),rt(dt,{slashscheme:!0,ascii:!0},e),t=t.sort((v,k)=>v[0]>k[0]?1:-1);for(let v=0;v<t.length;v++){const k=t[v][0],A=t[v][1]?{[Js]:!0}:{[Zs]:!0};k.indexOf("-")>=0?A[Re]=!0:G.test(k)?X.test(k)?A[vt]=!0:A[Ie]=!0:A[Se]=!0,sn(n,k,k,A)}return sn(n,"localhost",Mt,{ascii:!0}),n.jd=new O(he),{start:n,tokens:Object.assign({groups:e},Mn)}}function Sn(t,e){const n=ir(e.replace(/[A-Z]/g,a=>a.toLowerCase())),s=n.length,r=[];let i=0,o=0;for(;o<s;){let a=t,l=null,u=0,d=null,c=-1,p=-1;for(;o<s&&(l=a.go(n[o]));)a=l,a.accepts()?(c=0,p=0,d=a):c>=0&&(c+=n[o].length,p++),u+=n[o].length,i+=n[o].length,o++;i-=c,o-=p,u-=c,r.push({t:d.t,v:e.slice(i-u,i),s:i-u,e:i})}return r}function ir(t){const e=[],n=t.length;let s=0;for(;s<n;){let r=t.charCodeAt(s),i,o=r<55296||r>56319||s+1===n||(i=t.charCodeAt(s+1))<56320||i>57343?t[s]:t.slice(s,s+2);e.push(o),s+=o.length}return e}function Y(t,e,n,s,r){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new O(s),i.jr=r.slice(),t.j[l]=i),t=i}return i=new O(n),i.jr=r.slice(),t.j[e[o-1]]=i,i}function on(t){const e=[],n=[];let s=0,r="0123456789";for(;s<t.length;){let i=0;for(;r.indexOf(t[s+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(s,s+i),10);o>0;o--)n.pop();s+=i}else n.push(t[s]),s++}return e}const St={defaultProtocol:"http",events:null,format:an,formatHref:an,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ve(t,e=null){let n=Object.assign({},St);t&&(n=Object.assign(n,t instanceof Ve?t.o:t));const s=n.ignoreTags,r=[];for(let i=0;i<s.length;i++)r.push(s[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=r}Ve.prototype={o:St,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const s=e!=null;let r=this.o[t];return r&&(typeof r=="object"?(r=n.t in r?r[n.t]:St[t],typeof r=="function"&&s&&(r=r(e,n))):typeof r=="function"&&s&&(r=r(e,n.t,n)),r)},getObj(t,e,n){let s=this.o[t];return typeof s=="function"&&e!=null&&(s=s(e,n.t,n)),s},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function an(t){return t}function In(t,e){this.t="token",this.v=t,this.tk=e}In.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),s=t.get("format",e,this);return n&&s.length>n?s.substring(0,n)+"…":s},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=St.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),s=t.get("formatHref",n,this),r=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),c=t.getObj("events",n,e);return o.href=s,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:r,attributes:o,content:i,eventListeners:c}}};function me(t,e){class n extends In{constructor(r,i){super(r,i),this.t=t}}for(const s in e)n.prototype[s]=e[s];return n.t=t,n}const ln=me("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),cn=me("text"),or=me("nl"),Nt=me("url",{isLink:!0,toHref(t=St.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Mt&&t[1].t===tt}}),H=t=>new O(t);function ar({groups:t}){const e=t.domain.concat([te,ne,J,se,re,ie,oe,ae,P,je,Et,le,ce,ue,K,he,xt,de]),n=[ee,tt,Ue,U,Ke,Et,Tt,We,Fe,Wt,Ft,kt,At,$t,jt,Ut,Kt,Vt,Gt,Xt,qt,Qt,Yt,Jt,Zt],s=[te,ee,ne,se,re,ie,oe,ae,P,kt,At,Et,le,ce,ue,Tt,K,he,xt,de],r=H(),i=h(r,xt);m(i,s,i),m(i,t.domain,i);const o=H(),a=H(),l=H();m(r,t.domain,o),m(r,t.scheme,a),m(r,t.slashscheme,l),m(o,s,i),m(o,t.domain,o);const u=h(o,J);h(i,J,u),h(a,J,u),h(l,J,u);const d=h(i,U);m(d,s,i),m(d,t.domain,i);const c=H();m(u,t.domain,c),m(c,t.domain,c);const p=h(c,U);m(p,t.domain,c);const f=H(ln);m(p,t.tld,f),m(p,t.utld,f),h(u,Mt,f);const g=h(c,P);h(g,P,g),m(g,t.domain,c),m(f,t.domain,c),h(f,U,p),h(f,P,g);const v=h(f,tt);m(v,t.numeric,ln);const k=h(o,P),y=h(o,U);h(k,P,k),m(k,t.domain,o),m(y,s,i),m(y,t.domain,o);const A=H(Nt);m(y,t.tld,A),m(y,t.utld,A),m(A,t.domain,o),m(A,s,i),h(A,U,y),h(A,P,k),h(A,J,u);const pt=h(A,tt),S=H(Nt);m(pt,t.numeric,S);const C=H(Nt),F=H();m(C,e,C),m(C,n,F),m(F,e,C),m(F,n,F),h(A,K,C),h(S,K,C);const ut=h(a,tt),ft=h(l,tt),Ot=h(ft,K),nt=h(Ot,K);m(a,t.domain,o),h(a,U,y),h(a,P,k),m(l,t.domain,o),h(l,U,y),h(l,P,k),m(ut,t.domain,C),h(ut,K,C),h(ut,Tt,C),m(nt,t.domain,C),m(nt,e,C),h(nt,K,C);const mt=[[kt,At],[jt,$t],[Ut,Kt],[Wt,Ft],[Vt,Gt],[Xt,qt],[Qt,Yt],[Jt,Zt]];for(let gt=0;gt<mt.length;gt++){const[Rt,I]=mt[gt],Q=h(C,Rt);h(F,Rt,Q),h(Q,I,C);const D=H(Nt);m(Q,e,D);const j=H();m(Q,n),m(D,e,D),m(D,n,j),m(j,e,D),m(j,n,j),h(D,I,C),h(j,I,C)}return h(r,Mt,A),h(r,$e,or),{start:r,tokens:Mn}}function lr(t,e,n){let s=n.length,r=0,i=[],o=[];for(;r<s;){let a=t,l=null,u=null,d=0,c=null,p=-1;for(;r<s&&!(l=a.go(n[r].t));)o.push(n[r++]);for(;r<s&&(u=l||a.go(n[r].t));)l=null,a=u,a.accepts()?(p=0,c=a):p>=0&&p++,r++,d++;if(p<0)r-=d,r<s&&(o.push(n[r]),r++);else{o.length>0&&(i.push(xe(cn,e,o)),o=[]),r-=p,d-=p;const f=c.t,g=n.slice(r-d,r);i.push(xe(f,e,g))}}return o.length>0&&i.push(xe(cn,e,o)),i}function xe(t,e,n){const s=n[0].s,r=n[n.length-1].e,i=e.slice(s,r);return new t(i,n)}const cr=typeof console<"u"&&console&&console.warn||(()=>{}),ur="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",E={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function dr(){return O.groups={},E.scanner=null,E.parser=null,E.tokenQueue=[],E.pluginQueue=[],E.customSchemes=[],E.initialized=!1,E}function un(t,e=!1){if(E.initialized&&cr(`linkifyjs: already initialized - will not register custom scheme "${t}" ${ur}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);E.customSchemes.push([t,e])}function hr(){E.scanner=rr(E.customSchemes);for(let t=0;t<E.tokenQueue.length;t++)E.tokenQueue[t][1]({scanner:E.scanner});E.parser=ar(E.scanner.tokens);for(let t=0;t<E.pluginQueue.length;t++)E.pluginQueue[t][1]({scanner:E.scanner,parser:E.parser});return E.initialized=!0,E}function Ge(t){return E.initialized||hr(),lr(E.parser.start,t,Sn(E.scanner.start,t))}Ge.scan=Sn;function On(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const s=new Ve(n),r=Ge(t),i=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!e||a.t===e)&&s.check(a)&&i.push(a.toFormattedObject(s))}return i}var Xe="[\0-   ᠎ -\u2029 　]",pr=new RegExp(Xe),fr=new RegExp(`${Xe}$`),mr=new RegExp(Xe,"g");function gr(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function yr(t){return new _({key:new z("autolink"),appendTransaction:(e,n,s)=>{const r=e.some(u=>u.docChanged)&&!n.doc.eq(s.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!r||i)return;const{tr:o}=s,a=ls(n.doc,[...e]);if(cs(a).forEach(({newRange:u})=>{const d=us(s.doc,u,f=>f.isTextblock);let c,p;if(d.length>1)c=d[0],p=s.doc.textBetween(c.pos,c.pos+c.node.nodeSize,void 0," ");else if(d.length){const f=s.doc.textBetween(u.from,u.to," "," ");if(!fr.test(f))return;c=d[0],p=s.doc.textBetween(c.pos,u.to,void 0," ")}if(c&&p){const f=p.split(pr).filter(Boolean);if(f.length<=0)return!1;const g=f[f.length-1],v=c.pos+p.lastIndexOf(g);if(!g)return!1;const k=Ge(g).map(y=>y.toObject(t.defaultProtocol));if(!gr(k))return!1;k.filter(y=>y.isLink).map(y=>({...y,from:v+y.start+1,to:v+y.end+1})).filter(y=>s.schema.marks.code?!s.doc.rangeHasMark(y.from,y.to,s.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{ds(y.from,y.to,s.doc).some(A=>A.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function br(t){return new _({key:new z("handleClickLink"),props:{handleClick:(e,n,s)=>{var r,i;if(s.button!==0||!e.editable)return!1;let o=null;if(s.target instanceof HTMLAnchorElement)o=s.target;else{let d=s.target;const c=[];for(;d.nodeName!=="DIV";)c.push(d),d=d.parentNode;o=c.find(p=>p.nodeName==="A")}if(!o)return!1;const a=hs(e.state,t.type.name),l=(r=o?.href)!=null?r:a.href,u=(i=o?.target)!=null?i:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&l?(window.open(l,u),!0):!1}}})}function vr(t){return new _({key:new z("handlePasteLink"),props:{handlePaste:(e,n,s)=>{const{state:r}=e,{selection:i}=r,{empty:o}=i;if(o)return!1;let a="";s.content.forEach(u=>{a+=u.textContent});const l=On(a,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function st(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const r=typeof s=="string"?s:s.scheme;r&&n.push(r)}),!t||t.replace(mr,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var kr=ct.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){un(t);return}un(t.scheme,t.optionalSlashes)})},onDestroy(){dr()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!st(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!st(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!st(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",L(this.options.HTMLAttributes,t),0]:["a",L(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:s=>!!st(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:s=>!!st(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[et({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:s}=this.options,r=On(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!st(o,n),protocols:n,defaultProtocol:s}));r.length&&r.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(yr({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:r=>!!st(r,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(br({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(vr({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Ar=Object.defineProperty,Er=(t,e)=>{for(var n in e)Ar(t,n,{get:e[n],enumerable:!0})},Tr="listItem",dn="textStyle",hn=/^\s*([-+*])\s$/,Rn=R.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",L(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Tr,this.editor.getAttributes(dn)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ht({find:hn,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ht({find:hn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(dn),editor:this.editor})),[t]}}),Hn=R.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",L(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xr={};Er(xr,{findListItemPos:()=>It,getNextListDepth:()=>qe,handleBackspace:()=>De,handleDelete:()=>Be,hasListBefore:()=>Pn,hasListItemAfter:()=>Lr,hasListItemBefore:()=>Nn,listItemHasSubList:()=>_n,nextListIsDeeper:()=>Dn,nextListIsHigher:()=>Bn});var It=(t,e)=>{const{$from:n}=e.selection,s=An(t,e.schema);let r=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)r=n.node(i),r.type===s?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},qe=(t,e)=>{const n=It(t,e);if(!n)return!1;const[,s]=ms(e,t,n.$pos.pos+4);return s},Pn=(t,e,n)=>{const{$anchor:s}=t.selection,r=Math.max(0,s.pos-2),i=t.doc.resolve(r).node();return!(!i||!n.includes(i.type.name))},Nn=(t,e)=>{var n;const{$anchor:s}=e.selection,r=e.doc.resolve(s.pos-2);return!(r.index()===0||((n=r.nodeBefore)==null?void 0:n.type.name)!==t)},_n=(t,e,n)=>{if(!n)return!1;const s=An(t,e.schema);let r=!1;return n.descendants(i=>{i.type===s&&(r=!0)}),r},De=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Me(t.state,e)&&Pn(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((p,f)=>{p.type.name===e&&u.push({node:p,pos:f})});const d=u.at(-1);if(!d)return!1;const c=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},c.end()).joinForward().run()}if(!Me(t.state,e)||!ps(t.state))return!1;const s=It(e,t.state);if(!s)return!1;const i=t.state.doc.resolve(s.$pos.pos-2).node(s.depth),o=_n(e,t.state,i);return Nn(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Dn=(t,e)=>{const n=qe(t,e),s=It(t,e);return!s||!n?!1:n>s.depth},Bn=(t,e)=>{const n=qe(t,e),s=It(t,e);return!s||!n?!1:n<s.depth},Be=(t,e)=>{if(!Me(t.state,e)||!fs(t.state,e))return!1;const{selection:n}=t.state,{$from:s,$to:r}=n;return!n.empty&&s.sameParent(r)?!1:Dn(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Bn(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Lr=(t,e)=>{var n;const{$anchor:s}=e.selection,r=e.doc.resolve(s.pos-s.parentOffset-2);return!(r.index()===r.parent.childCount-1||((n=r.nodeAfter)==null?void 0:n.type.name)!==t)},zn=N.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Be(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Be(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{t.state.schema.nodes[n]!==void 0&&De(t,n,s)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{t.state.schema.nodes[n]!==void 0&&De(t,n,s)&&(e=!0)}),e}}}}),Cr="listItem",pn="textStyle",fn=/^(\d+)\.\s$/,jn=R.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",L(this.options.HTMLAttributes,n),0]:["ol",L(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Cr,this.editor.getAttributes(pn)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ht({find:fn,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ht({find:fn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pn)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),wr=/^\s*(\[([( |x])?\])\s$/,Mr=R.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:s})=>{const r=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=d=>{var c,p;a.ariaLabel=((p=(c=this.options.a11y)==null?void 0:c.checkboxLabel)==null?void 0:p.call(c,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:c}=d.target;s.isEditable&&typeof n=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const f=n();if(typeof f!="number")return!1;const g=p.doc.nodeAt(f);return p.setNodeMarkup(f,void 0,{...g?.attrs,checked:c}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,c)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,c])=>{r.setAttribute(d,c)}),r.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),r.append(i,l),Object.entries(e).forEach(([d,c])=>{r.setAttribute(d,c)}),{dom:r,contentDOM:l,update:d=>d.type!==this.type?!1:(r.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[ht({find:wr,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Sr=R.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",L(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});N.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Rn.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Hn.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(zn.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(jn.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Mr.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Sr.configure(this.options.taskList)),t}});var Ir=R.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Or=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Rr=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Hr=ct.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[lt({find:Or,type:this.type})]},addPasteRules(){return[et({find:Rr,type:this.type})]}}),Pr=R.create({name:"text",group:"inline"}),Nr=ct.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",L(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function _r(t={}){return new _({view(e){return new Dr(e,t)}})}class Dr{constructor(e,n){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=n.width)!==null&&s!==void 0?s:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=o=>{this[r](o)};return e.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,s,r=this.editorView.dom,i=r.getBoundingClientRect(),o=i.width/r.offsetWidth,a=i.height/r.offsetHeight;if(n){let c=e.nodeBefore,p=e.nodeAfter;if(c||p){let f=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(f){let g=f.getBoundingClientRect(),v=c?g.bottom:g.top;c&&p&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*a;s={left:g.left,right:g.right,top:v-k,bottom:v+k}}}}if(!s){let c=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;s={left:c.left-p,right:c.left+p,top:c.top,bottom:c.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let c=l.getBoundingClientRect(),p=c.width/l.offsetWidth,f=c.height/l.offsetHeight;u=c.left-l.scrollLeft*p,d=c.top-l.scrollTop*f}this.element.style.left=(s.left-u)/o+"px",this.element.style.top=(s.top-d)/a+"px",this.element.style.width=(s.right-s.left)/o+"px",this.element.style.height=(s.bottom-s.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),r=s&&s.type.spec.disableDropCursor,i=typeof r=="function"?r(this.editorView,n,e):r;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=gs(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class x extends Ct{constructor(e){super(e,e)}map(e,n){let s=e.resolve(n.map(this.head));return x.valid(s)?new x(s):Ct.near(s)}content(){return En.empty}eq(e){return e instanceof x&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new x(e.resolve(n.pos))}getBookmark(){return new Qe(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Br(e)||!zr(e))return!1;let s=n.type.spec.allowGapCursor;if(s!=null)return s;let r=n.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,n,s=!1){t:for(;;){if(!s&&x.valid(e))return e;let r=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;r+=n;let l=e.doc.resolve(r);if(x.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!ze.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*n),s=!1;continue t}break}i=o,r+=n;let a=e.doc.resolve(r);if(x.valid(a))return a}return null}}}x.prototype.visible=!1;x.findFrom=x.findGapCursorFrom;Ct.jsonID("gapcursor",x);class Qe{constructor(e){this.pos=e}map(e){return new Qe(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return x.valid(n)?new x(n):Ct.near(n)}}function Br(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),s=t.node(e);if(n==0){if(s.type.spec.isolating)return!0;continue}for(let r=s.child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function zr(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),s=t.node(e);if(n==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let r=s.child(n);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function jr(){return new _({props:{decorations:Wr,createSelectionBetween(t,e,n){return e.pos==n.pos&&x.valid(n)?new x(n):null},handleClick:Ur,handleKeyDown:$r,handleDOMEvents:{beforeinput:Kr}}})}const $r=ys({ArrowLeft:_t("horiz",-1),ArrowRight:_t("horiz",1),ArrowUp:_t("vert",-1),ArrowDown:_t("vert",1)});function _t(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,r,i){let o=s.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof it){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=s.doc.resolve(e>0?a.after():a.before())}let u=x.findGapCursorFrom(a,e,l);return u?(r&&r(s.tr.setSelection(new x(u))),!0):!1}}function Ur(t,e,n){if(!t||!t.editable)return!1;let s=t.state.doc.resolve(e);if(!x.valid(s))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return r&&r.inside>-1&&ze.isSelectable(t.state.doc.nodeAt(r.inside))?!1:(t.dispatch(t.state.tr.setSelection(new x(s))),!0)}function Kr(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof x))return!1;let{$from:n}=t.state.selection,s=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!s)return!1;let r=nn.empty;for(let o=s.length-1;o>=0;o--)r=nn.from(s[o].createAndFill(null,r));let i=t.state.tr.replace(n.pos,n.pos,new En(r,0,0));return i.setSelection(it.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function Wr(t){if(!(t.selection instanceof x))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",wt.create(t.doc,[fe.widget(t.selection.head,e,{key:"gapcursor"})])}var pe=200,w=function(){};w.prototype.append=function(e){return e.length?(e=w.from(e),!this.length&&e||e.length<pe&&this.leafAppend(e)||this.length<pe&&e.leafPrepend(this)||this.appendInner(e)):this};w.prototype.prepend=function(e){return e.length?w.from(e).append(this):this};w.prototype.appendInner=function(e){return new Fr(this,e)};w.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?w.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};w.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};w.prototype.forEach=function(e,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length),n<=s?this.forEachInner(e,n,s,0):this.forEachInvertedInner(e,n,s,0)};w.prototype.map=function(e,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length);var r=[];return this.forEach(function(i,o){return r.push(e(i,o))},n,s),r};w.from=function(e){return e instanceof w?e:e&&e.length?new $n(e):w.empty};var $n=function(t){function e(s){t.call(this),this.values=s}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,i){return r==0&&i==this.length?this:new e(this.values.slice(r,i))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,i,o,a){for(var l=i;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,a){for(var l=i-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=pe)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=pe)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(w);w.empty=new $n([]);var Fr=function(t){function e(n,s){t.call(this),this.left=n,this.right=s,this.length=n.length+s.length,this.depth=Math.max(n.depth,s.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,r,i,o){var a=this.left.length;if(r<a&&this.left.forEachInner(s,r,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(s,Math.max(r-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(s,r,i,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(s,r-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(s,Math.min(r,a),i,o)===!1)return!1},e.prototype.sliceInner=function(s,r){if(s==0&&r==this.length)return this;var i=this.left.length;return r<=i?this.left.slice(s,r):s>=i?this.right.slice(s-i,r-i):this.left.slice(s,i).append(this.right.slice(0,r-i))},e.prototype.leafAppend=function(s){var r=this.right.leafAppend(s);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(s){var r=this.left.leafPrepend(s);if(r)return new e(r,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e}(w);const Vr=500;class B{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let r,i;n&&(r=this.remapping(s,this.items.length),i=r.maps.length);let o=e.tr,a,l,u=[],d=[];return this.items.forEach((c,p)=>{if(!c.step){r||(r=this.remapping(s,p+1),i=r.maps.length),i--,d.push(c);return}if(r){d.push(new W(c.map));let f=c.step.map(r.slice(i)),g;f&&o.maybeStep(f).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],u.push(new W(g,void 0,void 0,u.length+d.length))),i--,g&&r.appendMap(g,i)}else o.maybeStep(c.step);if(c.selection)return a=r?c.selection.map(r.slice(i)):c.selection,l=new B(this.items.slice(0,s).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,s,r){let i=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let c=e.steps[d].invert(e.docs[d]),p=new W(e.mapping.maps[d],c,n),f;(f=l&&l.merge(p))&&(p=f,d?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(o++,n=void 0),r||(l=p)}let u=o-s.depth;return u>Xr&&(a=Gr(a,u),o-=u),new B(a.append(i),o)}remapping(e,n){let s=new bs;return this.items.forEach((r,i)=>{let o=r.mirrorOffset!=null&&i-r.mirrorOffset>=e?s.maps.length-r.mirrorOffset:void 0;s.appendMap(r.map,o)},e,n),s}addMaps(e){return this.eventCount==0?this:new B(this.items.append(e.map(n=>new W(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let s=[],r=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},r);let l=n;this.items.forEach(p=>{let f=i.getMirror(--l);if(f==null)return;o=Math.min(o,f);let g=i.maps[f];if(p.step){let v=e.steps[f].invert(e.docs[f]),k=p.selection&&p.selection.map(i.slice(l+1,f));k&&a++,s.push(new W(g,v,k))}else s.push(new W(g))},r);let u=[];for(let p=n;p<o;p++)u.push(new W(i.maps[p]));let d=this.items.slice(0,r).append(u).append(s),c=new B(d,a);return c.emptyItemCount()>Vr&&(c=c.compress(this.items.length-s.length)),c}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),s=n.maps.length,r=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(s)),u=l&&l.getMap();if(s--,u&&n.appendMap(u,s),l){let d=o.selection&&o.selection.map(n.slice(s));d&&i++;let c=new W(u.invert(),l,d),p,f=r.length-1;(p=r.length&&r[f].merge(c))?r[f]=p:r.push(c)}}else o.map&&s--},this.items.length,0),new B(w.from(r.reverse()),i)}}B.empty=new B(w.empty,0);function Gr(t,e){let n;return t.forEach((s,r)=>{if(s.selection&&e--==0)return n=r,!1}),t.slice(n)}class W{constructor(e,n,s,r){this.map=e,this.step=n,this.selection=s,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new W(n.getMap().invert(),n,this.selection)}}}class Z{constructor(e,n,s,r,i){this.done=e,this.undone=n,this.prevRanges=s,this.prevTime=r,this.prevComposition=i}}const Xr=20;function qr(t,e,n,s){let r=n.getMeta(ot),i;if(r)return r.historyState;n.getMeta(Jr)&&(t=new Z(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ot))return o.getMeta(ot).redo?new Z(t.done.addTransform(n,void 0,s,Bt(e)),t.undone,mn(n.mapping.maps),t.prevTime,t.prevComposition):new Z(t.done,t.undone.addTransform(n,void 0,s,Bt(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-s.newGroupDelay||!Qr(n,t.prevRanges)),u=o?Le(t.prevRanges,n.mapping):mn(n.mapping.maps);return new Z(t.done.addTransform(n,l?e.selection.getBookmark():void 0,s,Bt(e)),B.empty,u,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Z(t.done.rebased(n,i),t.undone.rebased(n,i),Le(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Z(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Le(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Qr(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((s,r)=>{for(let i=0;i<e.length;i+=2)s<=e[i+1]&&r>=e[i]&&(n=!0)}),n}function mn(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((s,r,i,o)=>e.push(i,o));return e}function Le(t,e){if(!t)return null;let n=[];for(let s=0;s<t.length;s+=2){let r=e.map(t[s],1),i=e.map(t[s+1],-1);r<=i&&n.push(r,i)}return n}function Yr(t,e,n){let s=Bt(e),r=ot.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,s);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),r,s),l=new Z(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(ot,{redo:n,historyState:l})}let Ce=!1,gn=null;function Bt(t){let e=t.plugins;if(gn!=e){Ce=!1,gn=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ce=!0;break}}return Ce}const ot=new z("history"),Jr=new z("closeHistory");function Zr(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new _({key:ot,state:{init(){return new Z(B.empty,B.empty,null,0,-1)},apply(e,n,s){return qr(n,s,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let s=n.inputType,r=s=="historyUndo"?Kn:s=="historyRedo"?Wn:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function Un(t,e){return(n,s)=>{let r=ot.getState(n);if(!r||(t?r.undone:r.done).eventCount==0)return!1;if(s){let i=Yr(r,n,t);i&&s(e?i.scrollIntoView():i)}return!0}}const Kn=Un(!1,!0),Wn=Un(!0,!0);N.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new _({key:new z("characterCount"),appendTransaction:(e,n,s)=>{if(t)return;const r=this.options.limit;if(r==null||r===0){t=!0;return}const i=this.storage.characters({node:s.doc});if(i>r){const o=i-r,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${r} characters. Content was automatically trimmed.`);const u=s.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const r=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=s||r>s&&i>s&&i<=r)return!0;if(r>s&&i>s&&i>r||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-s,u=a-l,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>s)}})]}});var ti=N.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_r(this.options)]}});N.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new _({key:new z("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:s}=this.editor,{anchor:r}=e,i=[];if(!n||!s)return wt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(r>=u&&r<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(r>=u&&r<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(fe.node(u,u+l.nodeSize,{class:this.options.className}))}),wt.create(t,i)}}})]}});var ei=N.create({name:"gapCursor",addProseMirrorPlugins(){return[jr()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=vs(ks(t,"allowGapCursor",n)))!=null?e:null}}});N.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new _({key:new z("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=e,r=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=s>=a&&s<=a+o.nodeSize,u=!o.isLeaf&&As(o);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];i&&d.push(this.options.emptyEditorClass);const c=fe.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});r.push(c)}return this.options.includeChildren}),wt.create(t,r)}}})]}});N.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new _({key:new z("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||kn(n.selection)||t.view.dragging?null:wt.create(n.doc,[fe.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function yn({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var ni=N.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new z(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new _({key:t,appendTransaction:(n,s,r)=>{const{doc:i,tr:o,schema:a}=r,l=t.getState(r),u=i.content.size,d=a.nodes[this.options.node];if(l)return o.insert(u,d.create())},state:{init:(n,s)=>{const r=s.tr.doc.lastChild;return!yn({node:r,types:e})},apply:(n,s)=>{if(!n.docChanged)return s;const r=n.doc.lastChild;return!yn({node:r,types:e})}}})]}}),si=N.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Kn(t,e),redo:()=>({state:t,dispatch:e})=>Wn(t,e)}},addProseMirrorPlugins(){return[Zr(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),ri=N.create({name:"starterKit",addExtensions(){var t,e,n,s;const r=[];return this.options.bold!==!1&&r.push(Ps.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(Ss.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(Rn.configure(this.options.bulletList)),this.options.code!==!1&&r.push(Ds.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(js.configure(this.options.codeBlock)),this.options.document!==!1&&r.push($s.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(ti.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(ei.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(Us.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(Ks.configure(this.options.heading)),this.options.undoRedo!==!1&&r.push(si.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&r.push(Ws.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(qs.configure(this.options.italic)),this.options.listItem!==!1&&r.push(Hn.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(zn.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&r.push(kr.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&r.push(jn.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(Ir.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(Hr.configure(this.options.strike)),this.options.text!==!1&&r.push(Pr.configure(this.options.text)),this.options.underline!==!1&&r.push(Nr.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&r.push(ni.configure((s=this.options)==null?void 0:s.trailingNode)),r}}),ii=ri,oi=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,ai=R.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",L(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[vn({find:oi,type:this.type,getAttributes:t=>{const[,,e,n,s]=t;return{src:n,alt:e,title:s}}})]}}),li=ai;const M={MOBILE_BREAKPOINT:768,ICON_SIZE:"24px",CONTROLLER_HEIGHT:"25px",DOT_SIZE:{MOBILE:16,DESKTOP:9},DOT_POSITION:{MOBILE:"-8px",DESKTOP:"-4px"},COLORS:{BORDER:"#6C6C6C",BACKGROUND:"rgba(255, 255, 255, 1)"},ICONS:{LEFT:"https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_left/default/20px.svg",CENTER:"https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_center/default/20px.svg",RIGHT:"https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_right/default/20px.svg"}},at={isMobile(){return document.documentElement.clientWidth<M.MOBILE_BREAKPOINT},getDotPosition(){return at.isMobile()?M.DOT_POSITION.MOBILE:M.DOT_POSITION.DESKTOP},getDotSize(){return at.isMobile()?M.DOT_SIZE.MOBILE:M.DOT_SIZE.DESKTOP},clearContainerBorder(t){const e=t.getAttribute("style"),n=e?.replace("border: 1px dashed #6C6C6C;","").replace("border: 1px dashed rgb(108, 108, 108)","");t.setAttribute("style",n)},removeResizeElements(t){if(t.childElementCount>3)for(let e=0;e<5;e++)t.removeChild(t.lastChild)}};class Lt{static getContainerStyle(e,n){return`${`width: ${n||"100%"}; height: auto; cursor: pointer;`} ${e?"display: inline-block;":""}`}static getWrapperStyle(e){return e?"display: inline-block; float: left; padding-right: 8px;":"display: flex"}static getPositionControllerStyle(e){return`
      position: absolute; 
      top: 0%; 
      left: 50%; 
      width: ${e?"66px":"100px"}; 
      height: ${M.CONTROLLER_HEIGHT}; 
      z-index: 999; 
      background-color: ${M.COLORS.BACKGROUND}; 
      border-radius: 3px; 
      border: 1px solid ${M.COLORS.BORDER}; 
      cursor: pointer; 
      transform: translate(-50%, -50%); 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      padding: 0 6px;
    `.replace(/\s+/g," ").trim()}static getDotStyle(e){const n=at.getDotPosition(),s=at.getDotSize(),r=[`top: ${n}; left: ${n}; cursor: nwse-resize;`,`top: ${n}; right: ${n}; cursor: nesw-resize;`,`bottom: ${n}; left: ${n}; cursor: nesw-resize;`,`bottom: ${n}; right: ${n}; cursor: nwse-resize;`];return`
      position: absolute; 
      width: ${s}px; 
      height: ${s}px; 
      border: 1.5px solid ${M.COLORS.BORDER}; 
      border-radius: 50%; 
      ${r[e]}
    `.replace(/\s+/g," ").trim()}}class bn{static parseImageAttributes(e,n){Object.entries(e).forEach(([s,r])=>{if(!(r==null||s==="wrapperStyle")){if(s==="containerStyle"){const i=r.match(/width:\s*([0-9.]+)px/);i&&n.setAttribute("width",i[1]);return}n.setAttribute(s,r)}})}static extractWidthFromStyle(e){const n=e.match(/width:\s*([0-9.]+)px/);return n?n[1]:null}}class ci{constructor(e,n,s){this.elements=e,this.inline=n,this.dispatchNodeView=s}createControllerIcon(e){const n=document.createElement("img");return n.setAttribute("src",e),n.setAttribute("style",`width: ${M.ICON_SIZE}; height: ${M.ICON_SIZE}; cursor: pointer;`),n.addEventListener("mouseover",s=>{s.target.style.opacity="0.6"}),n.addEventListener("mouseout",s=>{s.target.style.opacity="1"}),n}handleLeftClick(){if(!this.inline)this.elements.container.setAttribute("style",`${this.elements.container.style.cssText} margin: 0 auto 0 0;`);else{const e="display: inline-block; float: left; padding-right: 8px;";this.elements.wrapper.setAttribute("style",e),this.elements.container.setAttribute("style",e)}this.dispatchNodeView()}handleCenterClick(){this.elements.container.setAttribute("style",`${this.elements.container.style.cssText} margin: 0 auto;`),this.dispatchNodeView()}handleRightClick(){if(!this.inline)this.elements.container.setAttribute("style",`${this.elements.container.style.cssText} margin: 0 0 0 auto;`);else{const e="display: inline-block; float: right; padding-left: 8px;";this.elements.wrapper.setAttribute("style",e),this.elements.container.setAttribute("style",e)}this.dispatchNodeView()}createPositionControls(){const e=document.createElement("div");e.setAttribute("style",Lt.getPositionControllerStyle(this.inline));const n=this.createControllerIcon(M.ICONS.LEFT);if(n.addEventListener("click",()=>this.handleLeftClick()),e.appendChild(n),!this.inline){const r=this.createControllerIcon(M.ICONS.CENTER);r.addEventListener("click",()=>this.handleCenterClick()),e.appendChild(r)}const s=this.createControllerIcon(M.ICONS.RIGHT);return s.addEventListener("click",()=>this.handleRightClick()),e.appendChild(s),this.elements.container.appendChild(e),this}}class ui{constructor(e,n){this.state={isResizing:!1,startX:0,startWidth:0},this.handleMouseMove=(s,r)=>{if(!this.state.isResizing)return;const i=r%2===0?-(s.clientX-this.state.startX):s.clientX-this.state.startX,o=this.state.startWidth+i;this.elements.container.style.width=o+"px",this.elements.img.style.width=o+"px"},this.handleMouseUp=()=>{this.state.isResizing&&(this.state.isResizing=!1),this.dispatchNodeView()},this.handleTouchMove=(s,r)=>{if(!this.state.isResizing)return;const i=r%2===0?-(s.touches[0].clientX-this.state.startX):s.touches[0].clientX-this.state.startX,o=this.state.startWidth+i;this.elements.container.style.width=o+"px",this.elements.img.style.width=o+"px"},this.handleTouchEnd=()=>{this.state.isResizing&&(this.state.isResizing=!1),this.dispatchNodeView()},this.elements=e,this.dispatchNodeView=n}createResizeHandle(e){const n=document.createElement("div");return n.setAttribute("style",Lt.getDotStyle(e)),n.addEventListener("mousedown",s=>{s.preventDefault(),this.state.isResizing=!0,this.state.startX=s.clientX,this.state.startWidth=this.elements.container.offsetWidth;const r=o=>this.handleMouseMove(o,e),i=()=>{this.handleMouseUp(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)}),n.addEventListener("touchstart",s=>{s.cancelable&&s.preventDefault(),this.state.isResizing=!0,this.state.startX=s.touches[0].clientX,this.state.startWidth=this.elements.container.offsetWidth;const r=o=>this.handleTouchMove(o,e),i=()=>{this.handleTouchEnd(),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)};document.addEventListener("touchmove",r),document.addEventListener("touchend",i)},{passive:!1}),n}}class di{constructor(e,n){this.clearContainerBorder=()=>{at.clearContainerBorder(this.elements.container)},this.dispatchNodeView=()=>{var s;const{view:r,getPos:i}=this.context;if(typeof i=="function"){this.clearContainerBorder();const o=Object.assign(Object.assign({},this.context.node.attrs),{width:(s=bn.extractWidthFromStyle(this.elements.container.style.cssText))!==null&&s!==void 0?s:this.context.node.attrs.width,containerStyle:`${this.elements.container.style.cssText}`,wrapperStyle:`${this.elements.wrapper.style.cssText}`});r.dispatch(r.state.tr.setNodeMarkup(i(),null,o))}},this.removeResizeElements=()=>{at.removeResizeElements(this.elements.container)},this.context=e,this.inline=n,this.elements=this.createElements()}createElements(){return{wrapper:document.createElement("div"),container:document.createElement("div"),img:document.createElement("img")}}setupImageAttributes(){bn.parseImageAttributes(this.context.node.attrs,this.elements.img)}setupDOMStructure(){const{wrapperStyle:e,containerStyle:n}=this.context.node.attrs;this.elements.wrapper.setAttribute("style",e),this.elements.wrapper.appendChild(this.elements.container),this.elements.container.setAttribute("style",n),this.elements.container.appendChild(this.elements.img)}createPositionController(){new ci(this.elements,this.inline,this.dispatchNodeView).createPositionControls()}createResizeHandler(){const e=new ui(this.elements,this.dispatchNodeView);Array.from({length:4},(n,s)=>{const r=e.createResizeHandle(s);this.elements.container.appendChild(r)})}setupContainerClick(){this.elements.container.addEventListener("click",()=>{var e;at.isMobile()&&((e=document.querySelector(".ProseMirror-focused"))===null||e===void 0||e.blur()),this.removeResizeElements(),this.createPositionController(),this.elements.container.setAttribute("style",`position: relative; border: 1px dashed ${M.COLORS.BORDER}; ${this.context.node.attrs.containerStyle}`),this.createResizeHandler()})}setupContentClick(){document.addEventListener("click",e=>{const n=e.target;this.elements.container.contains(n)||n.style.cssText===`width: ${M.ICON_SIZE}; height: ${M.ICON_SIZE}; cursor: pointer;`||(this.clearContainerBorder(),this.removeResizeElements())})}initialize(){this.setupDOMStructure(),this.setupImageAttributes();const{editable:e}=this.context.editor.options;return e?(this.setupContainerClick(),this.setupContentClick(),{dom:this.elements.wrapper}):{dom:this.elements.container}}}const hi=li.extend({name:"imageResize",addOptions(){var t;return Object.assign(Object.assign({},(t=this.parent)===null||t===void 0?void 0:t.call(this)),{inline:!1})},addAttributes(){var t;const e=this.options.inline;return Object.assign(Object.assign({},(t=this.parent)===null||t===void 0?void 0:t.call(this)),{containerStyle:{default:Lt.getContainerStyle(e),parseHTML:n=>{const s=n.getAttribute("containerstyle")||n.getAttribute("style");if(s)return s;const r=n.getAttribute("width");return r?Lt.getContainerStyle(e,`${r}px`):`${n.style.cssText}`}},wrapperStyle:{default:Lt.getWrapperStyle(e)}})},addNodeView(){return({node:t,editor:e,getPos:n})=>{const s=this.options.inline,r={node:t,editor:e,view:e.view,getPos:typeof n=="function"?n:void 0};return new di(r,s).initialize()}}});function pi(t,e){b(e).chain().focus().toggleBold().run()}function fi(t,e){b(e).chain().focus().toggleItalic().run()}function mi(t,e){b(e).chain().focus().toggleStrike().run()}var gi=(t,e)=>e(1),yi=(t,e)=>e(2),bi=(t,e)=>e(3),vi=(t,e)=>e("left"),ki=(t,e)=>e("center"),Ai=(t,e)=>e("right"),Ei=Jn('<div class="overflow-hidden rounded-lg border border-gray-300 bg-white shadow-sm"><div class="flex flex-wrap gap-2 border-b border-gray-200 bg-gray-50 p-3"><button title="Bold">B</button> <button title="Italic">I</button> <button title="Strikethrough">S</button> <div class="h-[36px] w-px bg-gray-300"></div> <button title="Heading 1">H1</button> <button title="Heading 2">H2</button> <button title="Heading 3">H3</button> <div class="h-[36px] w-px bg-gray-300"></div> <button title="Align Left"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg></button> <button title="Align Center"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700"><line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line></svg></button> <button title="Align Right"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700"><line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line></svg></button> <div class="h-[36px] w-px bg-gray-300"></div> <button class="flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 transition-colors hover:bg-gray-100" title="Add Image"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-700"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="9" cy="9" r="2"></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path></svg></button></div> <div class="min-h-[300px] bg-white" style="border: none; outline: none;"></div></div>');function Hi(t,e){Qn(e,!1);let n=Je(),s=Je(),r=en(e,"content",12,"");en(e,"placeholder",8,"내용을 입력하세요..."),Xn(()=>{be(s,new Es({element:b(n),extensions:[ii.configure({hardBreak:!0}),Cs.configure({multicolor:!0}),Ts,ws.configure({types:["heading","paragraph"]}),hi.configure({inline:!1,allowBase64:!0,HTMLAttributes:{class:"rounded-lg"}})],content:r(),editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[300px] p-4"}},onTransaction:()=>{be(s,b(s))}}))}),qn(()=>{b(s)&&b(s).destroy()});function i(I){b(s).chain().focus().toggleHeading({level:I}).run()}function o(I){b(s).chain().focus().setTextAlign(I).run()}function a(){const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=Q=>{const D=Q.target.files?.[0];if(D){const j=new FileReader;j.onload=ge=>{const ye=ge.target.result;b(s).chain().focus().setImage({src:ye}).run()},j.readAsDataURL(D)}},I.click()}Ye(()=>b(s),()=>{b(s)&&r(b(s).getHTML())}),Ye(()=>(b(s),ss(r())),()=>{b(s)&&r()!==b(s).getHTML()&&b(s).commands.setContent(r())}),Yn(),os();var l=Ei(),u=Ze(l),d=Ze(u);let c;d.__click=[pi,s];var p=$(d,2);let f;p.__click=[fi,s];var g=$(p,2);let v;g.__click=[mi,s];var k=$(g,4);let y;k.__click=[gi,i];var A=$(k,2);let pt;A.__click=[yi,i];var S=$(A,2);let C;S.__click=[bi,i];var F=$(S,4);let ut;F.__click=[vi,o];var ft=$(F,2);let Ot;ft.__click=[ki,o];var nt=$(ft,2);let mt;nt.__click=[Ai,o];var gt=$(nt,4);gt.__click=a,tn(u);var Rt=$(u,2);is(Rt,I=>be(n,I),()=>b(n)),tn(l),Zn((I,Q,D,j,ge,ye,Fn,Vn,Gn)=>{c=V(d,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 text-sm font-bold transition-colors hover:bg-gray-100",null,c,I),f=V(p,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 text-sm italic transition-colors hover:bg-gray-100",null,f,Q),v=V(g,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 text-sm line-through transition-colors hover:bg-gray-100",null,v,D),y=V(k,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 px-3 py-2 text-sm font-semibold transition-colors hover:bg-gray-100",null,y,j),pt=V(A,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 px-3 py-2 text-sm font-semibold transition-colors hover:bg-gray-100",null,pt,ge),C=V(S,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 px-3 py-2 text-sm font-semibold transition-colors hover:bg-gray-100",null,C,ye),ut=V(F,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 transition-colors hover:bg-gray-100",null,ut,Fn),Ot=V(ft,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 transition-colors hover:bg-gray-100",null,Ot,Vn),mt=V(nt,1,"flex h-[36px] min-w-[36px] items-center justify-center rounded border border-gray-300 p-2 transition-colors hover:bg-gray-100",null,mt,Gn)},[()=>({"bg-blue-100":b(s)?.isActive("bold"),"border-blue-400":b(s)?.isActive("bold")}),()=>({"bg-blue-100":b(s)?.isActive("italic"),"border-blue-400":b(s)?.isActive("italic")}),()=>({"bg-blue-100":b(s)?.isActive("strike"),"border-blue-400":b(s)?.isActive("strike")}),()=>({"bg-blue-100":b(s)?.isActive("heading",{level:1}),"border-blue-400":b(s)?.isActive("heading",{level:1})}),()=>({"bg-blue-100":b(s)?.isActive("heading",{level:2}),"border-blue-400":b(s)?.isActive("heading",{level:2})}),()=>({"bg-blue-100":b(s)?.isActive("heading",{level:3}),"border-blue-400":b(s)?.isActive("heading",{level:3})}),()=>({"bg-blue-100":b(s)?.isActive({textAlign:"left"}),"border-blue-400":b(s)?.isActive({textAlign:"left"})}),()=>({"bg-blue-100":b(s)?.isActive({textAlign:"center"}),"border-blue-400":b(s)?.isActive({textAlign:"center"})}),()=>({"bg-blue-100":b(s)?.isActive({textAlign:"right"}),"border-blue-400":b(s)?.isActive({textAlign:"right"})})],ns),ts(t,l),es()}rs(["click"]);export{Hi as S};
