import"../chunks/CWj6FrbW.js";import{i as at,j as E,s as st,t as u,f as k,l as e,g as c,k as it,$ as mt,m as _,r as o,e as nt,n as a,v as ct,u as lt,o as _t}from"../chunks/BxrbYPPH.js";import{s as $}from"../chunks/BpDpeONt.js";import{i as F}from"../chunks/C_-0o-f2.js";import{e as ut,i as vt}from"../chunks/n-s4RcA1.js";import{d as dt,h as pt}from"../chunks/DKpueC4a.js";import{a as G}from"../chunks/BGk8CD_Q.js";import{l as ft}from"../chunks/CsDvq0KH.js";import{g as K}from"../chunks/CCryTnhq.js";import"../chunks/69_IOA4Y.js";import{R as bt}from"../chunks/CVQVGoVS.js";import{R as gt}from"../chunks/DgJjuvVc.js";import"../chunks/CYBAZs4S.js";import{H as ht}from"../chunks/CATT0rBV.js";import{I as xt}from"../chunks/BtboDQMP.js";import{o as yt}from"../chunks/Bxbzq6E6.js";import{c as j}from"../chunks/Dcrl4MPd.js";import{c as M,s as J}from"../chunks/iREZRceN.js";import{g as wt,a as kt}from"../chunks/C6eE29Wt.js";var $t=u('<meta name="description" content="내가 참여한 커뮤니티 목록을 한눈에 확인하고, 커뮤니티 활동을 쉽게 관리">'),jt=(v,s)=>K(`/@${s.handle}/accounts`),zt=u('<div slot="left"><button><!></button></div>'),Rt=u('<h1 slot="center" class="font-semibold">참여 커뮤니티</h1>'),Lt=(v,s,i)=>s(a(i).communities.id),At=u('<button class="btn btn-sm btn-soft h-7">참여중</button>'),Ht=(v,s,i,p)=>{M(s)&&i(a(p).communities.id)},It=u('<button class="btn btn-primary btn-sm h-7">참여하기</button>'),Pt=u('<article class="px-4"><div class="flex items-start justify-between"><a class="flex"><img alt="커뮤니티 아바타" class="mr-2 h-12 w-12 rounded-full object-cover" loading="lazy" width="48" height="48"> <div class="flex flex-col justify-between"><p class="line-clamp-2 pr-4 font-medium"> </p> <p class="flex text-xs text-gray-400"><!> </p></div></a> <!></div> <p class="mt-2 line-clamp-2 text-sm text-gray-800"> </p></article> <hr class="my-3 border-gray-200">',1),St=(v,s)=>{M(s)&&K("/community/regi")},qt=u('<!> <main><!> <div class="fixed bottom-18 mx-auto flex w-full max-w-screen-md justify-end pr-4"><button class="rounded-full bg-blue-500 p-3 text-white shadow-lg hover:bg-blue-600"><!></button></div></main>',1);function tr(v,s){at(s,!0);const i=wt(),p=kt();let{joined_communities:N,community_members:O}=s.data,Q=E(N),f=st(E(O));const T=r=>a(f).some(t=>t.community_id===r.id),U=r=>r.community_members?.[0]?.count??0,V=async r=>{try{await p.community_members.insert(r,i.id),a(f).push({community_id:r,user_id:i.id}),J("success","커뮤니티에 참여했어요!")}catch(t){console.error(t)}},W=async r=>{try{await p.community_members.delete(r,i.id),_t(f,a(f).filter(t=>t.community_id!==r),!0),J("error","커뮤니티 참여가 취소되었어요!")}catch(t){console.error(t)}};var z=qt();pt(r=>{var t=$t();mt.title="참여 커뮤니티 | 문",c(r,t)});var R=k(z);ht(R,{$$slots:{left:(r,t)=>{var m=zt(),d=e(m);d.__click=[jt,i];var h=e(d);gt(h,{size:24,get color(){return j.gray[800]}}),o(d),o(m),c(r,m)},center:(r,t)=>{var m=Rt();c(r,m)}}});var L=_(R,2),A=e(L);ut(A,17,()=>Q,vt,(r,t)=>{var m=nt(),d=k(m);{var h=x=>{var I=Pt(),P=k(I),y=e(P),b=e(y),S=e(b),q=_(S,2),w=e(q),Y=e(w,!0);o(w);var B=_(w,2),C=e(B);xt(C,{attribute:"person",size:16,get color(){return j.gray[400]}});var Z=_(C);o(B),o(q),o(b);var tt=_(b,2);{var rt=n=>{var l=At();l.__click=[Lt,W,t],c(n,l)},et=n=>{var l=It();l.__click=[Ht,i,V,t],c(n,l)};F(tt,n=>{T(a(t).communities)?n(rt):n(et,!1)})}o(y);var D=_(y,2),ot=e(D,!0);o(D),o(P),ct(2),lt((n,l)=>{G(b,"href",`/community/${a(t).communities.slug}`),G(S,"src",n),$(Y,a(t).communities.title),$(Z,` ${l??""}`),$(ot,a(t).communities.content)},[()=>yt(a(t).communities.avatar_url)||ft,()=>U(a(t).communities)]),c(x,I)};F(d,x=>{a(t).communities&&x(h)})}c(r,m)});var H=_(A,2),g=e(H);g.__click=[St,i];var X=e(g);bt(X,{size:20,get color(){return j.white}}),o(g),o(H),o(L),c(v,z),it()}dt(["click"]);export{tr as component};
