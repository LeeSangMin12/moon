import"../chunks/CWj6FrbW.js";import{q as Et,u as O,g as c,i as Ft,s as E,j as gt,t as x,f as yt,k as Jt,$ as Kt,l as e,m as a,o as i,n as r,r as t,v as wt}from"../chunks/BxrbYPPH.js";import{s as d}from"../chunks/BpDpeONt.js";import{i as vt}from"../chunks/C_-0o-f2.js";import{e as kt,i as Ct}from"../chunks/n-s4RcA1.js";import{d as Nt,h as Ot,r as Qt}from"../chunks/DKpueC4a.js";import{s as Ut,b as Ht,d as zt}from"../chunks/BGk8CD_Q.js";import{b as Wt}from"../chunks/vV7d1D-f.js";import{i as Mt}from"../chunks/CCryTnhq.js";import{s as Xt}from"../chunks/3os2E0c7.js";import"../chunks/69_IOA4Y.js";import{R as Yt}from"../chunks/DgJjuvVc.js";import{R as te}from"../chunks/D47Fyr3u.js";import{R as ee}from"../chunks/DpfUluG8.js";import{l as Rt,p as N}from"../chunks/Cqu1rs7T.js";import{R as ae}from"../chunks/BmUo1YTu.js";import{H as re}from"../chunks/CATT0rBV.js";import{M as se}from"../chunks/IkWuq9-R.js";import{c as oe}from"../chunks/Dcrl4MPd.js";import{s as F,a as Lt,f as ct}from"../chunks/iREZRceN.js";import{g as le,a as de}from"../chunks/C6eE29Wt.js";var ne=Et('<svg><path d="M12.0049 22.0027C6.48204 22.0027 2.00488 17.5256 2.00488 12.0027C2.00488 6.4799 6.48204 2.00275 12.0049 2.00275C17.5277 2.00275 22.0049 6.4799 22.0049 12.0027C22.0049 17.5256 17.5277 22.0027 12.0049 22.0027ZM12.0049 20.0027C16.4232 20.0027 20.0049 16.421 20.0049 12.0027C20.0049 7.58447 16.4232 4.00275 12.0049 4.00275C7.5866 4.00275 4.00488 7.58447 4.00488 12.0027C4.00488 16.421 7.5866 20.0027 12.0049 20.0027ZM8.50488 14.0027H14.0049C14.281 14.0027 14.5049 13.7789 14.5049 13.5027C14.5049 13.2266 14.281 13.0027 14.0049 13.0027H10.0049C8.62417 13.0027 7.50488 11.8835 7.50488 10.5027C7.50488 9.12203 8.62417 8.00275 10.0049 8.00275H11.0049V6.00275H13.0049V8.00275H15.5049V10.0027H10.0049C9.72874 10.0027 9.50488 10.2266 9.50488 10.5027C9.50488 10.7789 9.72874 11.0027 10.0049 11.0027H14.0049C15.3856 11.0027 16.5049 12.122 16.5049 13.5027C16.5049 14.8835 15.3856 16.0027 14.0049 16.0027H13.0049V18.0027H11.0049V16.0027H8.50488V14.0027Z"></path></svg>');function ie(w,o){const _=Rt(o,["children","$$slots","$$events","$$legacy"]),m=Rt(_,["size","color","label","class"]);let p=N(o,"size",8,"1em"),h=N(o,"color",8,"currentColor"),b=N(o,"label",8,""),g=N(o,"class",8,"");var P=ne();let J;O(()=>J=Ut(P,J,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:p(),height:p(),fill:h(),"aria-label":b()?b():void 0,"aria-hidden":b()?void 0:"true",role:b()?"img":void 0,class:`remixicon ri-money-dollar-circle-line ${g()??""}`,...m})),c(w,P)}const ve=async(w,o,_,m,p,h,b,g)=>{if(!r(o).trim()){F("error","거절 사유를 입력해주세요.");return}try{await _.moon_withdrawals.reject(r(m),r(o)),F("success","출금 요청이 거절되었습니다."),i(p,!1),i(m,null),i(o,""),await Mt(),i(h,b.data.pending_withdrawals||[],!0),i(g,b.data.recent_withdrawals||[],!0)}catch(P){F("error",P.message)}};var ce=x('<button slot="left"><!></button>'),_e=x('<div class="rounded-lg border border-yellow-200 bg-yellow-50 p-6"><p>moon_withdrawals 테이블이 존재하지 않습니다.</p></div>'),ue=x('<p class="text-gray-400">대기중인 출금 요청이 없습니다.</p>'),xe=(w,o,_)=>o(r(_)),me=(w,o,_)=>o(r(_).id),pe=x('<tr class="border-b transition last:border-none hover:bg-blue-50"><td class="px-6 py-3"> </td><td> <span class="text-xs text-gray-400"> </span></td><td class="font-bold text-blue-700"> </td><td> </td><td> </td><td> </td><td> </td><td><span> </span></td><td class="flex min-w-[110px] flex-col items-center gap-2"><button class="flex items-center gap-1 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 px-4 py-1.5 text-xs font-semibold text-white shadow transition hover:from-blue-600 hover:to-blue-700"><!> 승인</button> <button class="flex items-center gap-1 rounded-lg bg-gradient-to-r from-red-400 to-red-500 px-4 py-1.5 text-xs font-semibold text-white shadow transition hover:from-red-500 hover:to-red-600"><!> 거절</button></td></tr>'),be=x('<div class="overflow-x-auto rounded-2xl bg-white shadow"><table class="min-w-full text-sm"><thead><tr class="bg-gray-50 text-gray-700"><th class="px-6 py-4 font-semibold">ID</th><th>사용자</th><th>금액(문)</th><th>은행</th><th>계좌번호</th><th>예금주</th><th>신청일</th><th>상태</th><th>관리</th></tr></thead><tbody></tbody></table></div>'),he=x('<p class="text-gray-400">최근 처리된 출금 요청이 없습니다.</p>'),fe=x('<tr class="border-b last:border-none"><td class="px-6 py-3"> </td><td> <span class="text-xs text-gray-400"> </span></td><td class="font-bold text-blue-700"> </td><td> </td><td> </td><td> </td><td> </td><td><span> </span></td><td> </td></tr>'),ge=x('<div class="overflow-x-auto rounded-2xl bg-white shadow"><table class="min-w-full text-sm"><thead><tr class="bg-gray-50 text-gray-700"><th class="px-6 py-4 font-semibold">ID</th><th>사용자</th><th>금액(문)</th><th>은행</th><th>계좌번호</th><th>예금주</th><th>신청일</th><th>상태</th><th>처리일</th></tr></thead><tbody></tbody></table></div>'),ye=x('<div class="mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3"><div class="flex items-center rounded-2xl bg-gradient-to-r from-blue-100 to-blue-50 p-6 shadow"><!> <div class="ml-4"><p class="text-sm font-medium text-blue-700">대기 중인 요청</p> <p class="text-3xl font-extrabold text-blue-900"> </p></div></div> <div class="flex items-center rounded-2xl bg-gradient-to-r from-green-100 to-green-50 p-6 shadow"><!> <div class="ml-4"><p class="text-sm font-medium text-green-700">최근 처리된 요청</p> <p class="text-3xl font-extrabold text-green-900"> </p></div></div></div> <div class="mb-10"><h2 class="mb-4 text-xl font-bold text-gray-800">대기중인 출금 요청</h2> <!></div> <div><h2 class="mb-4 text-xl font-bold text-gray-800">최근 처리된 출금 요청</h2> <!></div>',1),we=(w,o)=>i(o,!1),ke=x('<div class="p-4"><h3 class="mb-4 font-semibold">출금 요청 거절</h3> <textarea rows="3" placeholder="거절 사유를 입력하세요" class="w-full rounded border p-2 text-sm focus:outline-none"></textarea> <div class="mt-4 flex gap-2"><button class="btn flex-1">취소</button> <button class="btn btn-error flex-1">거절</button></div></div>'),Ce=x('<!> <div class="container mx-auto max-w-7xl px-4 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900">문 포인트 출금 신청 관리</h1> <p class="mt-2 text-gray-600">사용자들의 출금 요청을 관리합니다.</p></div> <!></div> <!>',1);function Ke(w,o){Ft(o,!0),le();const _=de();let m=E(gt(o.data.pending_withdrawals||[])),p=E(gt(o.data.recent_withdrawals||[])),h=E(!1),b=E(null),g=E("");const P=async l=>{if(confirm("이 출금 요청을 승인하시겠습니까?"))try{await _.moon_withdrawals.approve(l.id),await _.moon_point_transactions.insert({user_id:l.user_id,amount:-l.amount,type:"withdrawal",description:"출금 요청 승인"}),F("success","출금 요청이 승인되었습니다."),await Mt(),i(m,o.data.pending_withdrawals||[],!0),i(p,o.data.recent_withdrawals||[],!0)}catch(y){F("error",y.message)}},J=l=>{i(b,l,!0),i(g,""),i(h,!0)},_t=l=>{switch(l){case"pending":return"대기중";case"approved":return"승인됨";case"rejected":return"거절됨";default:return l}};var ut=Ce();Ot(l=>{Kt.title="관리자 - 출금 신청 관리"});var xt=yt(ut);re(xt,{$$slots:{left:(l,y)=>{var v=ce();v.__click=function(...k){Xt?.apply(this,k)};var f=e(v);Yt(f,{size:26,get color(){return oe.gray[600]}}),t(v),c(l,v)}}});var Q=a(xt,2),Vt=a(e(Q),2);{var jt=l=>{var y=_e();c(l,y)},$t=l=>{var y=ye(),v=yt(y),f=e(v),k=e(f);ae(k,{size:32,class:"text-blue-400"});var A=a(k,2),K=a(e(A),2),U=e(K);t(K),t(A),t(f);var mt=a(f,2),pt=e(mt);ie(pt,{size:32,class:"text-green-400"});var bt=a(pt,2),ht=a(e(bt),2),Pt=e(ht);t(ht),t(bt),t(mt),t(v);var W=a(v,2),Zt=a(e(W),2);{var At=n=>{var u=ue();c(n,u)},Bt=n=>{var u=be(),B=e(u),I=a(e(B));kt(I,21,()=>r(m),Ct,(X,s)=>{var C=pe(),H=e(C),Y=e(H,!0);t(H);var z=a(H),q=e(z),G=a(q),tt=e(G);t(G),t(z);var R=a(z),et=e(R);t(R);var L=a(R),at=e(L,!0);t(L);var M=a(L),rt=e(M,!0);t(M);var V=a(M),st=e(V,!0);t(V);var j=a(V),ot=e(j,!0);t(j);var $=a(j),D=e($),lt=e(D,!0);t(D),t($);var S=a($),Z=e(S);Z.__click=[xe,P,s];var dt=e(Z);te(dt,{size:16}),wt(),t(Z);var T=a(Z,2);T.__click=[me,J,s];var nt=e(T);ee(nt,{size:16}),wt(),t(T),t(S),t(C),O((it,St,Tt)=>{d(Y,r(s).id),d(q,`${r(s).users?.name??""} `),d(tt,`(@${r(s).users?.handle??""})`),d(et,`${it??""}문`),d(at,r(s).bank),d(rt,r(s).account_number),d(st,r(s).account_holder),d(ot,St),Ht(D,1,zt(r(s).status==="pending"?"inline-block rounded-full bg-yellow-100 px-3 py-1 text-xs font-bold text-yellow-800":r(s).status==="approved"?"inline-block rounded-full bg-green-100 px-3 py-1 text-xs font-bold text-green-800":"inline-block rounded-full bg-red-100 px-3 py-1 text-xs font-bold text-red-800")),d(lt,Tt)},[()=>Lt(r(s).amount),()=>ct(r(s).created_at),()=>_t(r(s).status)]),c(X,C)}),t(I),t(B),t(u),c(n,u)};vt(Zt,n=>{r(m).length===0?n(At):n(Bt,!1)})}t(W);var ft=a(W,2),It=a(e(ft),2);{var qt=n=>{var u=he();c(n,u)},Gt=n=>{var u=ge(),B=e(u),I=a(e(B));kt(I,21,()=>r(p),Ct,(X,s)=>{var C=fe(),H=e(C),Y=e(H,!0);t(H);var z=a(H),q=e(z),G=a(q),tt=e(G);t(G),t(z);var R=a(z),et=e(R);t(R);var L=a(R),at=e(L,!0);t(L);var M=a(L),rt=e(M,!0);t(M);var V=a(M),st=e(V,!0);t(V);var j=a(V),ot=e(j,!0);t(j);var $=a(j),D=e($),lt=e(D,!0);t(D),t($);var S=a($),Z=e(S,!0);t(S),t(C),O((dt,T,nt,it)=>{d(Y,r(s).id),d(q,`${r(s).users?.name??""} `),d(tt,`(@${r(s).users?.handle??""})`),d(et,`${dt??""}문`),d(at,r(s).bank),d(rt,r(s).account_number),d(st,r(s).account_holder),d(ot,T),Ht(D,1,zt(r(s).status==="pending"?"inline-block rounded-full bg-yellow-100 px-3 py-1 text-xs font-bold text-yellow-800":r(s).status==="approved"?"inline-block rounded-full bg-green-100 px-3 py-1 text-xs font-bold text-green-800":"inline-block rounded-full bg-red-100 px-3 py-1 text-xs font-bold text-red-800")),d(lt,nt),d(Z,it)},[()=>Lt(r(s).amount),()=>ct(r(s).created_at),()=>_t(r(s).status),()=>ct(r(s).updated_at)]),c(X,C)}),t(I),t(B),t(u),c(n,u)};vt(It,n=>{r(p).length===0?n(qt):n(Gt,!1)})}t(ft),O(()=>{d(U,`${r(m).length??""}건`),d(Pt,`${r(p).length??""}건`)}),c(l,y)};vt(Vt,l=>{o.data.table_missing?l(jt):l($t,!1)})}t(Q);var Dt=a(Q,2);se(Dt,{modal_position:"center",get is_modal_open(){return r(h)},set is_modal_open(l){i(h,l,!0)},children:(l,y)=>{var v=ke(),f=a(e(v),2);Qt(f);var k=a(f,2),A=e(k);A.__click=[we,h];var K=a(A,2);K.__click=[ve,g,_,b,h,m,o,p],t(k),t(v),Wt(f,()=>r(g),U=>i(g,U)),c(l,v)},$$slots:{default:!0}}),c(w,ut),Jt()}Nt(["click"]);export{Ke as component};
